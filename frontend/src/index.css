@import "tailwindcss";

@theme {
  /* Primary Colors */
  --color-primary: #4F46E5;
  --color-primary-light: #EEF2FF;
  --color-secondary: #64748B;

  /* Surface & Background */
  --color-surface: #FFFFFF;
  --color-background: #F8FAFC;
  --color-bg-cream: #F5F4F1;
  --color-bg-muted: #EDECEA;
  --color-bg-surface: #FFFFFF;

  /* Text */
  --color-text-primary: #1A1918;
  --color-text-secondary: #6D6C6A;
  --color-text-tertiary: #9C9B99;

  /* Border */
  --color-border-subtle: #E5E4E1;

  /* Feedback */
  --color-correct: #10B981;
  --color-correct-light: #D1FAE5;
  --color-wrong: #EF4444;
  --color-wrong-light: #FEE2E2;
  --color-warning: #F59E0B;
  --color-info: #3B82F6;

  /* Accent */
  --color-accent-indigo: #4F46E5;
  --color-accent-indigo-light: #EEF2FF;

  /* Teacher Dashboard */
  --color-teal: #2D9CAE;
  --color-teal-light: #EBF8FA;
  --color-teal-dark: #247F8E;

  /* Level Colors */
  --color-level-1: #86EFAC;
  --color-level-2: #22C55E;
  --color-level-3: #38BDF8;
  --color-level-4: #A78BFA;
  --color-level-5: #FBBF24;

  /* Font Families */
  --font-sans: 'Pretendard Variable', 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-display: 'Outfit', sans-serif;
  --font-word: 'Inter', sans-serif;
  --font-mono: 'Roboto Mono', monospace;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 20px;
}

/* ── Mobile touch/interaction optimizations ── */

/* 탭 하이라이트 제거 */
* {
  -webkit-tap-highlight-color: transparent;
}

/* 버튼/링크: 더블탭 줌 방지, 텍스트 선택 방지 */
button, a, [role="button"] {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

/* Input: 더블탭 줌 방지 (텍스트 선택은 허용) */
input, textarea, select {
  touch-action: manipulation;
}

/* Sticky hover 방지: 터치 디바이스에서 hover 효과 비활성화 */
@media (hover: none) and (pointer: coarse) {
  .hover\:bg-bg-muted:hover,
  .hover\:text-wrong:hover,
  .hover\:bg-wrong-light:hover {
    background: inherit;
    color: inherit;
  }
}

/* 스크롤 최적화 */
.overflow-y-auto,
.overflow-x-auto {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* ── Print styles ──
 * 원칙: 웹 디자인을 최대한 유지. 숨기기 + 축소만 한다.
 *   1) 사이드바/버튼 등 UI 숨기기
 *   2) zoom으로 A4에 맞게 축소
 *   3) 배경색 강제 인쇄 (print-color-adjust)
 *   4) 나머지 border, padding, radius 등은 원본 그대로
 */
@page {
  size: A4;
  margin: 8mm;
}

@media print {
  /* ── 1. 비인쇄 요소 숨기기 ── */
  aside,
  .print-hidden {
    display: none !important;
  }

  /* ── 2. 레이아웃: min-width 해제, 사이드바 제거 후 전폭 ── */
  body,
  #root,
  #root > div,
  #root > div > div {
    min-width: 0 !important;
    width: 100% !important;
  }

  main {
    margin: 0 !important;
    width: 100% !important;
    overflow: visible !important;
  }

  /* TeacherLayout main > div.p-7.px-8 패딩 제거 (사이드바 없으므로 불필요) */
  main > div {
    padding: 0 !important;
  }

  /* ── 3. 리포트 컨테이너: zoom 축소, min-width 해제 ── */
  .print-report {
    min-width: 0 !important;
    zoom: 0.80;
  }

  /* ── 4. 리포트 카드: 원본 디자인 유지, overflow만 해제 ── */
  .print-report-card {
    overflow: visible !important;
    box-shadow: none !important;
  }

  /* ── 5. 접힌 섹션 강제 표시 ── */
  .print-always-show {
    display: block !important;
  }

  /* ── 6. 모든 배경색 & 색상 정확히 인쇄 ── */
  * {
    print-color-adjust: exact !important;
    -webkit-print-color-adjust: exact !important;
    animation: none !important;
    transition: none !important;
  }

  /* 최외곽 페이지 배경만 흰색 (종이 색상) */
  .min-h-screen {
    background: white !important;
    min-height: auto !important;
  }

  /* ── 7. 페이지 나누기 ── */
  .print-break-before {
    break-before: page;
    page-break-before: always;
  }

  .print-page-break {
    break-before: page;
    page-break-before: always;
  }

  /* ── 8. 테이블 ── */
  tr {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  thead {
    display: table-header-group;
  }

  table {
    break-inside: auto;
    page-break-inside: auto;
  }

  /* ── 9. MasteryReportPage 전용 (멀티페이지 탭) ── */
  .print-page {
    border: none !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    padding: 4mm !important;
    margin: 0 !important;
    zoom: 0.62;
  }

  .print-show {
    display: block !important;
  }
}
